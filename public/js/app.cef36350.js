(function(){"use strict";var e={1586:function(e,t,a){var o=a(9242),r=a(3396);function s(e,t,a,o,s,n){const i=(0,r.up)("NavigationComp"),u=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i),(0,r.Wm)(u)],64)}var n=a(7139),i=a.p+"img/logo.114bd80e.svg";const u=e=>((0,r.dD)("data-v-53c96b01"),e=e(),(0,r.Cn)(),e),l={class:"nav-group"},d=u((()=>(0,r._)("img",{src:i,alt:"logo"},null,-1))),c=u((()=>(0,r._)("div",{class:"logo"},"Epic dragons",-1))),m={key:0,class:"nav-group"},p=u((()=>(0,r._)("div",{class:"login"},"Login",-1))),g=u((()=>(0,r._)("div",{class:"register"},"Register",-1))),f={key:1,class:"nav-group"},h={class:"login"};function v(e,t,a,o,s,i){const u=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("nav",null,[(0,r._)("div",l,[(0,r.Wm)(u,{to:"/"},{default:(0,r.w5)((()=>[d])),_:1}),(0,r.Wm)(u,{to:"/"},{default:(0,r.w5)((()=>[c])),_:1})]),i.user?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",m,[(0,r.Wm)(u,{to:"/login"},{default:(0,r.w5)((()=>[p])),_:1}),(0,r.Wm)(u,{to:"/register"},{default:(0,r.w5)((()=>[g])),_:1})])),i.user?((0,r.wg)(),(0,r.iD)("div",f,[(0,r.Wm)(u,{to:"/user"},{default:(0,r.w5)((()=>[(0,r._)("div",h,(0,n.zw)(i.user.username),1)])),_:1}),(0,r._)("div",{onClick:t[0]||(t[0]=(...e)=>i.logout&&i.logout(...e)),class:"register"},"Log out")])):(0,r.kq)("",!0)])}var w={name:"NavigationComp",methods:{async logout(){try{await this.$store.dispatch("logout"),this.isUserLoggedIn||(this.$toast.success("Successfully logged out.",{position:"bottom-left",duration:1e3}),await this.$router.push("/login"))}catch(e){console.log(e),this.$toast.error("Couldn't log out.",{position:"bottom-left",duration:1e3})}}},computed:{user(){return this.$store.state.user}}},_=a(89);const b=(0,_.Z)(w,[["render",v],["__scopeId","data-v-53c96b01"]]);var y=b,U={name:"App",components:{NavigationComp:y}};const I=(0,_.Z)(U,[["render",s]]);var q=I,D=a(678),C=a.p+"img/dragon.638c5327.svg";const L=e=>((0,r.dD)("data-v-4297d845"),e=e(),(0,r.Cn)(),e),k={class:"view-body"},S=L((()=>(0,r._)("img",{src:C,alt:"dragon"},null,-1))),$={class:"home-text"},E=L((()=>(0,r._)("h1",null,"Website about epic dragons",-1))),O=L((()=>(0,r._)("p",null,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Integer lacinia. Aenean fermentum risus id tortor. Nullam lectus justo, vulputate eget mollis sed, tempor sed magna. Nullam rhoncus aliquam metus. Integer tempor. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Integer tempor. Quisque tincidunt scelerisque libero. Nullam lectus justo, vulputate eget mollis sed, tempor sed magna. Suspendisse nisl. Maecenas lorem. Integer in sapien.",-1))),j=L((()=>(0,r._)("p",null,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Integer malesuada. Etiam dui sem, fermentum vitae, sagittis id, malesuada in, quam. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Nullam lectus justo, vulputate eget mollis sed, tempor sed magna. Fusce aliquam vestibulum ipsum. Aliquam id dolor. Nullam dapibus fermentum ipsum. Mauris metus. Fusce aliquam vestibulum ipsum. Aenean id metus id velit ullamcorper pulvinar. Etiam neque. Maecenas sollicitudin. Curabitur sagittis hendrerit ante. In enim a arcu imperdiet malesuada. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.",-1))),R=L((()=>(0,r._)("button",{class:"button"},"Show me",-1)));function V(e,t,a,o,s,n){const i=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",k,[S,(0,r._)("div",$,[E,O,j,(0,r.Wm)(i,{to:"/dragons"},{default:(0,r.w5)((()=>[R])),_:1})])])}var F={name:"HomeView"};const M=(0,_.Z)(F,[["render",V],["__scopeId","data-v-4297d845"]]);var N=M;const P=e=>((0,r.dD)("data-v-4443273e"),e=e(),(0,r.Cn)(),e),W=P((()=>(0,r._)("h1",null,"Dragons",-1))),A={class:"dragons"};function Z(e,t,a,o,s,n){const i=(0,r.up)("DragonComponent");return(0,r.wg)(),(0,r.iD)(r.HY,null,[W,(0,r._)("div",A,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.dragons,(e=>((0,r.wg)(),(0,r.j4)(i,{key:e._id,dragon:e},null,8,["dragon"])))),128))])],64)}var x=a(6265),z=a.n(x);let T;T="/api";const H=z().create({baseURL:T,timeout:1e3,headers:{"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Credentials":!0},withCredentials:!0});var Y=H;const K=e=>((0,r.dD)("data-v-0577720e"),e=e(),(0,r.Cn)(),e),Q={class:"dragon"},B=["src"],G={class:"label"},J={class:"values"},X=K((()=>(0,r._)("i",{class:"fa fa-heart",title:"health"},null,-1))),ee=K((()=>(0,r._)("i",{class:"fa fa-fire",title:"damage"},null,-1)));function te(e,t,a,o,s,i){return(0,r.wg)(),(0,r.iD)("div",Q,[(0,r._)("img",{src:a.dragon.image,alt:"dragon"},null,8,B),(0,r._)("div",G,[(0,r._)("h2",null,(0,n.zw)(a.dragon.name),1),(0,r._)("div",J,[(0,r._)("span",null,[X,(0,r.Uk)(" "+(0,n.zw)(a.dragon.health),1)]),(0,r._)("span",null,[ee,(0,r.Uk)(" "+(0,n.zw)(a.dragon.damage),1)])])])])}var ae={name:"DragonComponent",props:{dragon:Object}};const oe=(0,_.Z)(ae,[["render",te],["__scopeId","data-v-0577720e"]]);var re=oe,se={name:"DragonsView",components:{DragonComponent:re},data(){return{dragons:[]}},mounted(){Y.get("/dragons").then((e=>{this.dragons=e.data.data})).catch((e=>{console.log(e),this.$toast.error("Couldn't fetch dragons.",{position:"bottom-left",duration:1e3})}))}};const ne=(0,_.Z)(se,[["render",Z],["__scopeId","data-v-4443273e"]]);var ie=ne;const ue=e=>((0,r.dD)("data-v-14627037"),e=e(),(0,r.Cn)(),e),le={class:"view-body"},de=ue((()=>(0,r._)("h1",null,"Login",-1))),ce={class:"form-part"},me=ue((()=>(0,r._)("label",{for:"email"},"Email",-1))),pe={class:"form-part"},ge=ue((()=>(0,r._)("label",{for:"password"},"Password",-1))),fe=ue((()=>(0,r._)("button",{class:"form-button"},"Login",-1)));function he(e,t,a,s,n,i){return(0,r.wg)(),(0,r.iD)("div",le,[de,(0,r._)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)((e=>i.login()),["prevent"]))},[(0,r._)("div",ce,[me,(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),id:"email",placeholder:"Email",required:""},null,512),[[o.nr,n.email]])]),(0,r._)("div",pe,[ge,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),id:"password",placeholder:"Password",required:""},null,512),[[o.nr,n.password]])]),fe],32)])}var ve={name:"LoginView",data(){return{email:"",password:""}},computed:{isUserLoggedIn(){return this.$store.state.userLoggedIn}},methods:{async login(){try{await this.$store.dispatch("login",{email:this.email,password:this.password}),this.isUserLoggedIn&&(this.$toast.success("Authentication succeeded.",{position:"bottom-left",duration:1e3}),await this.$router.push("/dragons"))}catch(e){console.log(e),this.$toast.error(`Authentication failed! Error: ${e}`,{position:"bottom-left",duration:1e3})}}}};const we=(0,_.Z)(ve,[["render",he],["__scopeId","data-v-14627037"]]);var _e=we;const be=e=>((0,r.dD)("data-v-9ccfc26c"),e=e(),(0,r.Cn)(),e),ye={class:"view-body"},Ue=be((()=>(0,r._)("h1",null,"Register",-1))),Ie={class:"form-part"},qe=be((()=>(0,r._)("label",{for:"username"},"Username",-1))),De={class:"form-part"},Ce=be((()=>(0,r._)("label",{for:"email"},"Email",-1))),Le={class:"form-part"},ke=be((()=>(0,r._)("label",{for:"password"},"Password",-1))),Se=be((()=>(0,r._)("button",{class:"form-button"},"Register",-1)));function $e(e,t,a,s,n,i){return(0,r.wg)(),(0,r.iD)("div",ye,[Ue,(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,o.iM)(((...e)=>i.register&&i.register(...e)),["prevent"]))},[(0,r._)("div",Ie,[qe,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),id:"username",placeholder:"Username",required:""},null,512),[[o.nr,n.username]])]),(0,r._)("div",De,[Ce,(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),id:"email",placeholder:"Email",required:""},null,512),[[o.nr,n.email]])]),(0,r._)("div",Le,[ke,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),id:"password",placeholder:"Password",required:""},null,512),[[o.nr,n.password]])]),Se],32)])}var Ee={name:"RegisterView",data(){return{username:"",email:"",password:""}},methods:{register(){Y.post("/users/register",{username:this.username,email:this.email,password:this.password}).then((()=>{this.$toast.success("Registration succeeded!",{position:"bottom-left",duration:1e3}),this.$router.push("/login")})).catch((e=>{console.log(e),this.$toast.error("Registration failed!",{position:"bottom-left",duration:1e3})}))}}};const Oe=(0,_.Z)(Ee,[["render",$e],["__scopeId","data-v-9ccfc26c"]]);var je=Oe,Re=(a(1703),a(65));const Ve=(0,Re.MT)({state:{user:null,userLoggedIn:!1,isStoreUpdated:!1},mutations:{setUser(e,t){e.user=t},setUserIsLoggedIn(e,t){e.userLoggedIn=t},setIsStoreUpdated(e,t){e.isStoreUpdated=t}},actions:{async login(e,{email:t,password:a}){const o=await Y.post("/users/login",{email:t,password:a}).catch((e=>{throw new Error(e)}));if(!o||!o.data)throw e.commit("setUser",null),e.commit("setUserIsLoggedIn",!1),new Error("unknown error");e.commit("setUser",o.data.data),e.commit("setUserIsLoggedIn",!0)},async updateStore(e){try{const t=await Y.get("/users");e.commit("setUser",t.data.data),e.commit("setUserIsLoggedIn",!0)}catch(t){e.commit("setUser",null),e.commit("setUserIsLoggedIn",!1)}finally{e.commit("setIsStoreUpdated",!0)}},async logout(e){const t=await Y.post("/users/logout").catch((e=>{throw new Error(e)}));t&&(e.commit("setUser",null),e.commit("setUserIsLoggedIn",!1))}}});var Fe=Ve;const Me=e=>((0,r.dD)("data-v-ffa5c50a"),e=e(),(0,r.Cn)(),e),Ne={class:"view-body"},Pe=Me((()=>(0,r._)("h1",null,"User",-1))),We=Me((()=>(0,r._)("i",{class:"fa fa-user"},null,-1))),Ae=Me((()=>(0,r._)("i",{class:"fa fa-at"},null,-1))),Ze=Me((()=>(0,r._)("i",{class:"fa fa-calendar"},null,-1)));function xe(e,t,a,o,s,i){return(0,r.wg)(),(0,r.iD)("div",Ne,[Pe,(0,r._)("span",null,[We,(0,r.Uk)((0,n.zw)(i.user.username),1)]),(0,r._)("span",null,[Ae,(0,r.Uk)((0,n.zw)(i.user.email),1)]),(0,r._)("span",null,[Ze,(0,r.Uk)((0,n.zw)(i.parseDate(i.user.registrationDate)),1)])])}var ze={name:"UserView",methods:{parseDate(e){return new Date(Date.parse(e)).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}},computed:{user(){return this.parseDate(this.$store.state.user.registrationDate),this.$store.state.user}}};const Te=(0,_.Z)(ze,[["render",xe],["__scopeId","data-v-ffa5c50a"]]);var He=Te;const Ye=[{path:"/",name:"home",component:N,meta:{title:"Epic dragons",authRequired:!1,authForbidden:!1}},{path:"/dragons",name:"dragons",component:ie,meta:{title:"Dragons",authRequired:!0,authForbidden:!1}},{path:"/login",name:"login",component:_e,meta:{title:"Login",authRequired:!1,authForbidden:!0}},{path:"/register",name:"register",component:je,meta:{title:"Register",authRequired:!1,authForbidden:!0}},{path:"/user",name:"user",component:He,meta:{title:"User profile",authRequired:!0,authForbidden:!1}}],Ke=(0,D.p7)({history:(0,D.PO)("/"),routes:Ye});Ke.beforeEach((async(e,t,a)=>{Fe.state.isStoreUpdated||await Fe.dispatch("updateStore");const o=Fe.state.userLoggedIn;!o&&e.meta.authRequired?a({name:"login"}):o&&e.meta.authForbidden?a({name:"user"}):a()})),Ke.afterEach((e=>{document.title=e.meta.title}));var Qe=Ke,Be=a(6215),Ge=a.n(Be);(0,o.ri)(q).use(Qe).use(Ge()).use(Fe).mount("#app")}},t={};function a(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,o,r,s){if(!o){var n=1/0;for(d=0;d<e.length;d++){o=e[d][0],r=e[d][1],s=e[d][2];for(var i=!0,u=0;u<o.length;u++)(!1&s||n>=s)&&Object.keys(a.O).every((function(e){return a.O[e](o[u])}))?o.splice(u--,1):(i=!1,s<n&&(n=s));if(i){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,r,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,s,n=o[0],i=o[1],u=o[2],l=0;if(n.some((function(t){return 0!==e[t]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(u)var d=u(a)}for(t&&t(o);l<n.length;l++)s=n[l],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(1586)}));o=a.O(o)})();
//# sourceMappingURL=app.cef36350.js.map